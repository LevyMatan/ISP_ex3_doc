<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EX3: factori.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EX3
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('factori_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">factori.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main program file. Factori will receive 4 command arguments: Task file, priority file, number of tasks, and number of threads. It then Will compute the prime factors of the target numbers in the tasks file, in the order mentioned in the pririty file. It will then add to the task file a string with the prime factors of the target number. It will do that using the mentioned number of threads, which means, the output order is not gurnteed when ran with more than one thread. The main thread will read the priority file and set the priorities into a FIFO queue. After that the main thread will start N worker threads. At their own pace each worker will pop an task, read it from database file, compute the prime factors, and write the factors to end of the file. Access to shared resources is protect using mutexes and semaphores by the lock module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="factori_8h_source.html">factori.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for factori.c:</div>
<div class="dyncontent">
<div class="center"><img src="factori_8c__incl.png" border="0" usemap="#afactori_8c" alt=""/></div>
<map name="factori_8c" id="factori_8c">
<area shape="rect" title="Main program file. Factori will receive 4 command arguments: Task file, priority file,..." alt="" coords="367,5,436,32"/>
<area shape="rect" href="factori_8h.html" title="Delartion of core function to construct Factori." alt="" coords="367,80,436,107"/>
<area shape="rect" title=" " alt="" coords="358,319,445,345"/>
<area shape="rect" title=" " alt="" coords="744,244,806,271"/>
<area shape="rect" href="command__line__parsing__ext_8h.html" title="Decleration and defenitions of all command line parsing related function and macros." alt="" coords="324,155,479,196"/>
<area shape="rect" href="common__types_8h.html" title="All common hardcoded data, types, and constants." alt="" coords="238,244,360,271"/>
<area shape="rect" href="queue__ext_8h.html" title="All exposed functions and types to be used by someone who wants to call the Queue module." alt="" coords="503,162,596,189"/>
<area shape="rect" href="trace_8h.html" title="All common hardcoded data, types, and constants." alt="" coords="634,244,697,271"/>
<area shape="rect" href="lock__ext_8h.html" title="All exposed functions and types to be used by someone who wants to call the Lock module." alt="" coords="36,162,119,189"/>
<area shape="rect" href="file__utils__ext_8h.html" title="Module to enable easy manipulation of files in the factori program. Most probably it is very specific..." alt="" coords="143,162,250,189"/>
<area shape="rect" href="prime__ext_8h.html" title="Compute the prime factors of a given POSITIVE number. 0 is not allowed, and 1 has no prime factors." alt="" coords="620,162,711,189"/>
<area shape="rect" title=" " alt="" coords="587,319,654,345"/>
<area shape="rect" title=" " alt="" coords="678,319,744,345"/>
<area shape="rect" title=" " alt="" coords="548,244,610,271"/>
</map>
</div>
</div>
<p><a href="factori_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="factori_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">&lt; When we want to test a specific function/ scenario compile with that flag, when done, we compile another file with cutsom tests.  <a href="factori_8c.html#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0a6e0d0a136e229ecf00fd6593c402e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232">error_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="factori_8c.html#ad0a6e0d0a136e229ecf00fd6593c402e">create_worker</a> (HANDLE *p_worker_handle, <a class="el" href="factori_8h.html#a211cf880072f935f64194483e9722825">worker_params_t</a> *p_worker_param)</td></tr>
<tr class="memdesc:ad0a6e0d0a136e229ecf00fd6593c402e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a worker object: Packs parameters into a struct, and calls CreateThread.  <a href="factori_8c.html#ad0a6e0d0a136e229ecf00fd6593c402e">More...</a><br /></td></tr>
<tr class="separator:ad0a6e0d0a136e229ecf00fd6593c402e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1487cb2f24894cf9c48a718c302503"><td class="memItemLeft" align="right" valign="top">static DWORD WINAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="factori_8c.html#acc1487cb2f24894cf9c48a718c302503">worker_thread</a> (LPVOID lpParam)</td></tr>
<tr class="memdesc:acc1487cb2f24894cf9c48a718c302503"><td class="mdescLeft">&#160;</td><td class="mdescRight">As the name suggests, does most of the work load expected from the program. Details are found in the <a class="el" href="readme_8md.html">readme.md</a> file and in the brief of this entire file.  <a href="factori_8c.html#acc1487cb2f24894cf9c48a718c302503">More...</a><br /></td></tr>
<tr class="separator:acc1487cb2f24894cf9c48a718c302503"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main program file. Factori will receive 4 command arguments: Task file, priority file, number of tasks, and number of threads. It then Will compute the prime factors of the target numbers in the tasks file, in the order mentioned in the pririty file. It will then add to the task file a string with the prime factors of the target number. It will do that using the mentioned number of threads, which means, the output order is not gurnteed when ran with more than one thread. The main thread will read the priority file and set the priorities into a FIFO queue. After that the main thread will start N worker threads. At their own pace each worker will pop an task, read it from database file, compute the prime factors, and write the factors to end of the file. Access to shared resources is protect using mutexes and semaphores by the lock module. </p>
<dl class="section author"><dt>Author</dt><dd>Matan Levy (<a href="#" onclick="location.href='mai'+'lto:'+'lev'+'ym'+'ata'+'nl'+'evy'+'@g'+'mai'+'l.'+'com'; return false;">levym<span style="display: none;">.nosp@m.</span>atan<span style="display: none;">.nosp@m.</span>levy@<span style="display: none;">.nosp@m.</span>gmai<span style="display: none;">.nosp@m.</span>l.com</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2020-11-09</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2020 </dd></dl>

<p class="definition">Definition in file <a class="el" href="factori_8c_source.html">factori.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad0a6e0d0a136e229ecf00fd6593c402e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0a6e0d0a136e229ecf00fd6593c402e">&#9670;&nbsp;</a></span>create_worker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232">error_e</a> create_worker </td>
          <td>(</td>
          <td class="paramtype">HANDLE *&#160;</td>
          <td class="paramname"><em>p_worker_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="factori_8h.html#a211cf880072f935f64194483e9722825">worker_params_t</a> *&#160;</td>
          <td class="paramname"><em>p_worker_param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a worker object: Packs parameters into a struct, and calls CreateThread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_worker_handle</td><td>: A pointer to an handle, fills it with allocated handle, will be used by caller to close handle. </td></tr>
    <tr><td class="paramname">p_worker_param</td><td>: String containg the task file name, Pointer to queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error_e </dd></dl>

<p class="definition">Definition at line <a class="el" href="factori_8c_source.html#l00243">243</a> of file <a class="el" href="factori_8c_source.html">factori.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// Debug Prefix /////////////</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="trace_8h.html#ad4ed3d5d742c56a417076ab5e1a5dd29">DEBUG_PRINT_FUNCTION_START</a>();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="trace_8h.html#a04f52cd3d2fada8961ec1d353ac5509d">DEBUG_PRINT_ARG</a>(<span class="stringliteral">&quot;Input file name : %s\n&quot;</span>, p_worker_param-&gt;<a class="code" href="structworker__params__s.html#a6a7695ab492ad6eb66512cc155b184c4">a_tasks_file_name</a>);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="queue__ext_8h.html#afa81aaef004c00ea3f90c1b7cd2317e5">DEBUG_PRINT_QUEUE_STATUS</a>(p_worker_param-&gt;<a class="code" href="structworker__params__s.html#a33c0a8e7a6412053b789120446f93419">p_queue</a>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232">error_e</a> e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232aadeb5032c03491611646c1c64f7c0e0c">ERROR_OK</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span>( (NULL == p_worker_handle)                  || </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        (NULL == p_worker_param)                   || </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        (NULL == p_worker_param-&gt;<a class="code" href="structworker__params__s.html#a33c0a8e7a6412053b789120446f93419">p_queue</a>)          || </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        (NULL == p_worker_param-&gt;<a class="code" href="structworker__params__s.html#a6a7695ab492ad6eb66512cc155b184c4">a_tasks_file_name</a>)|| </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        (NULL == p_worker_param-&gt;<a class="code" href="structworker__params__s.html#ac119332d5ac44045e1c7d27e23263947">p_lock_queue</a>)     ||</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        (NULL == p_worker_param-&gt;<a class="code" href="structworker__params__s.html#a2e86a302da7bea84d2f127e64cb4e8bb">p_lock_tasks_file</a>)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        )                              </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="trace_8h.html#a9e1da3f98202e27d74c6309dec5e8dbf">print_error_msg</a>(<span class="stringliteral">&quot;Recieved invalid parameters!\n&quot;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a0b228f1b329d42635ff838109be43b6a">ERROR_INVALID_PARAM_E</a>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        LPDWORD p_thread_id = NULL;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        (*p_worker_handle) = CreateThread(</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            NULL,                               <span class="comment">/*  default security attributes */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            0,                                  <span class="comment">/*  use default stack size */</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <a class="code" href="factori_8c.html#acc1487cb2f24894cf9c48a718c302503">worker_thread</a>,                      <span class="comment">/*  thread function */</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            p_worker_param,                     <span class="comment">/*  argument to thread function */</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            0,                                  <span class="comment">/*  use default creation flags */</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            p_thread_id);                       <span class="comment">/*  returns the thread identifier */</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">if</span> (NULL == (*p_worker_handle))</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <a class="code" href="trace_8h.html#a9e1da3f98202e27d74c6309dec5e8dbf">print_error_msg</a>(<span class="stringliteral">&quot;Error when creating thread\n&quot;</span>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a2c94b966c744d2ac7c5954e07ee61c47">ERROR_FAILED_TO_CREATE_THREAD_E</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// Debug Suffix /////////////</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="trace_8h.html#afc1d6b99a4c100f81e56388c74b63cf1">DEBUG_PRINT_FUNCTION_END</a>();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">return</span> e_status;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="factori_8h_source.html#l00045">worker_params_s::a_tasks_file_name</a>, <a class="el" href="trace_8h_source.html#l00170">DEBUG_PRINT_ARG</a>, <a class="el" href="trace_8h_source.html#l00172">DEBUG_PRINT_FUNCTION_END</a>, <a class="el" href="trace_8h_source.html#l00171">DEBUG_PRINT_FUNCTION_START</a>, <a class="el" href="queue__ext_8h_source.html#l00036">DEBUG_PRINT_QUEUE_STATUS</a>, <a class="el" href="common__types_8h_source.html#l00075">ERROR_FAILED_TO_CREATE_THREAD_E</a>, <a class="el" href="common__types_8h_source.html#l00046">ERROR_INVALID_PARAM_E</a>, <a class="el" href="common__types_8h_source.html#l00044">ERROR_OK</a>, <a class="el" href="factori_8h_source.html#l00047">worker_params_s::p_lock_queue</a>, <a class="el" href="factori_8h_source.html#l00048">worker_params_s::p_lock_tasks_file</a>, <a class="el" href="factori_8h_source.html#l00046">worker_params_s::p_queue</a>, <a class="el" href="trace_8h_source.html#l00042">print_error_msg</a>, and <a class="el" href="factori_8c_source.html#l00296">worker_thread()</a>.</p>

<p class="reference">Referenced by <a class="el" href="factori_8c_source.html#l00035">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="factori_8c_ad0a6e0d0a136e229ecf00fd6593c402e_cgraph.png" border="0" usemap="#afactori_8c_ad0a6e0d0a136e229ecf00fd6593c402e_cgraph" alt=""/></div>
<map name="factori_8c_ad0a6e0d0a136e229ecf00fd6593c402e_cgraph" id="factori_8c_ad0a6e0d0a136e229ecf00fd6593c402e_cgraph">
<area shape="rect" title="Create a worker object: Packs parameters into a struct, and calls CreateThread." alt="" coords="5,329,109,356"/>
<area shape="rect" href="factori_8c.html#acc1487cb2f24894cf9c48a718c302503" title="As the name suggests, does most of the work load expected from the program. Details are found in the ..." alt="" coords="157,329,261,356"/>
<area shape="rect" href="file__utils__ext_8h.html#aa61cde9f0eda8ca94b81c2b9ea7efcd9" title="The function prints a line into a buffer according to requirments." alt="" coords="338,5,466,32"/>
<area shape="rect" href="file__utils__ext_8h.html#ad4637d1602e581b018988f78767d5f5f" title="Creates a file handle for shared Read and WRITE." alt="" coords="309,57,495,98"/>
<area shape="rect" href="file__utils__ext_8h.html#ac483ad62d3ca895678cffe3a53744f32" title="Read a single line, that is, all charecters until \r &#160;(including). Outputs the number of charcters th..." alt="" coords="325,122,479,163"/>
<area shape="rect" href="file__utils__ext_8h.html#a6ba806c9791793d2e17d9c65745589ad" title="Write a buffer (string) to a file." alt="" coords="317,187,487,229"/>
<area shape="rect" href="lock__ext_8h.html#ad998fe7d10043d8d0119913c1104f131" title="Lock a resource (can be what ever resource you want) for readinging. That is, any number of readers c..." alt="" coords="341,253,463,280"/>
<area shape="rect" href="lock__ext_8h.html#a387d3cd06fb2999414bd1c60a0214649" title="Release the readers lock." alt="" coords="333,304,471,331"/>
<area shape="rect" href="lock__ext_8h.html#a5d3201469d7c49626a752c11c7760b10" title="Lock a resource for writing. That is, exclusive access, to a specific resource. No other readers or w..." alt="" coords="340,355,464,381"/>
<area shape="rect" href="lock__ext_8h.html#a83e03a05b849ad0ca826de75fe29b2cb" title="Release the write lock." alt="" coords="331,405,473,432"/>
<area shape="rect" href="prime__ext_8h.html#ab1cd6cee23a302a6ac6af9cd7dabb8cb" title="Compute the prime factors of a given POSITIVE number. 0 is not allowed, and 1 has no prime factors." alt="" coords="334,456,470,483"/>
<area shape="rect" href="queue__ext_8h.html#a9bc9b6a4ce45ab9e7bd2beb99646a892" title="Returns true if the queue is empty and false otherwise. (Also checks the validity of the queuewhen ac..." alt="" coords="345,507,459,533"/>
<area shape="rect" href="queue__ext_8h.html#a59dd29666d51f1070ecc907c638f2018" title="Removed the top queue element from the queue. If called on empty queue does nothing,..." alt="" coords="353,557,451,584"/>
<area shape="rect" href="queue__ext_8h.html#af1c113374e964f484498f3fa67352e7d" title="Given a queue, return the top element of the queue. On fail: reutrn a &quot;NULL Queue element&quot;,..." alt="" coords="355,608,449,635"/>
<area shape="rect" href="queue_8c.html#a6d7944c7e57a033b8127b413b9539d47" title="A queue is valid in two cases: 1) Not&#45;empty: if queue is not empty, count is greater than zero,..." alt="" coords="543,557,705,584"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="factori_8c_ad0a6e0d0a136e229ecf00fd6593c402e_icgraph.png" border="0" usemap="#afactori_8c_ad0a6e0d0a136e229ecf00fd6593c402e_icgraph" alt=""/></div>
<map name="factori_8c_ad0a6e0d0a136e229ecf00fd6593c402e_icgraph" id="factori_8c_ad0a6e0d0a136e229ecf00fd6593c402e_icgraph">
<area shape="rect" title="Create a worker object: Packs parameters into a struct, and calls CreateThread." alt="" coords="104,5,208,32"/>
<area shape="rect" href="factori_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="&lt; When we want to test a specific function/ scenario compile with that flag, when done,..." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>&lt; When we want to test a specific function/ scenario compile with that flag, when done, we compile another file with cutsom tests. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<p>&lt; A pointer to the queue which will hold the task offsets in the task file.</p>
<p>&lt; A pointer to the lock which will hold the synchronization enteties: mutexes and semaphores..</p>
<p>&lt; A pointer to the lock which will hold the synchronization enteties: mutexes and semaphores..</p>
<p>&lt; The priority file handle</p>
<p>&lt; The task file handle</p>
<p>&lt; A pointer to an array of HANDLE for the "workers" - threads that will process the tasks.</p>

<p class="definition">Definition at line <a class="el" href="factori_8c_source.html#l00035">35</a> of file <a class="el" href="factori_8c_source.html">factori.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">/*------------------------------</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">    * Declare variables</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">    * ---------------------------*/</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232">error_e</a> e_status;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="structfactori__args__s.html">factori_args_t</a> command_line_args;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="structqueue__s.html">queue_t</a>         *p_task_priority_queue      = NULL;  </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="structlock__s.html">lock_t</a>          *p_lock_queue               = NULL;  </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="structlock__s.html">lock_t</a>          *p_lock_tasks_file          = NULL;  </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    HANDLE          priority_file_handle        = NULL;  </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    HANDLE          task_file_handle            = NULL;  </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    HANDLE          *pa_working_threads_handles = NULL;  </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="structworker__params__s.html">worker_params_t</a> *p_workers_params           = NULL;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="comment">/*------------------------------</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">        * Parse command line to parameters</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">        * ---------------------------*/</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        e_status = <a class="code" href="command__line__parsing__ext_8h.html#a48746ebf755019b062fe43d17259c7ef">parse_command_line_input</a>(argc, argv, &amp;command_line_args);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">if</span> (command_line_args.<a class="code" href="structfactori__args__s.html#a639f825edc175c42483bba7c67ff7ff7">num_of_threads</a> == 0)</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="comment">/*------------------------------</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">        * Initialize priority queue</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">        * ---------------------------*/</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="comment">// Init queue struct</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        p_task_priority_queue = <a class="code" href="queue__ext_8h.html#a8777304a9bca1e8917a46edd1e4209aa">QUEUE_initialize_queue</a>();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">if</span>(NULL == p_task_priority_queue)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a8407b9556d8eb7b5c96f75bf6cc1e022">ERROR_FAILES_TO_INITIALIZE_QUEUE_E</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="comment">// Init lock struct</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        p_lock_queue = <a class="code" href="lock__ext_8h.html#a1438450e8ec75fb3feb6ce67a503d779">LOCK_initialize_lock</a>();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">if</span>(NULL == p_lock_queue)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <a class="code" href="trace_8h.html#a9e1da3f98202e27d74c6309dec5e8dbf">print_error_msg</a>(<span class="stringliteral">&quot;Failed to initialize queue lock!\n&quot;</span>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232abe2a47cd38e8d32957f81c49d39784d0">ERROR_FAILES_TO_INITIALIZE_LOCK_E</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        p_lock_tasks_file = <a class="code" href="lock__ext_8h.html#a1438450e8ec75fb3feb6ce67a503d779">LOCK_initialize_lock</a>();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">if</span>(NULL == p_lock_tasks_file)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <a class="code" href="trace_8h.html#a9e1da3f98202e27d74c6309dec5e8dbf">print_error_msg</a>(<span class="stringliteral">&quot;Failed to initialize tasks file lock!\n&quot;</span>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232abe2a47cd38e8d32957f81c49d39784d0">ERROR_FAILES_TO_INITIALIZE_LOCK_E</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="comment">// Open priority file</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        e_status = <a class="code" href="file__utils__ext_8h.html#ad4637d1602e581b018988f78767d5f5f">FILE_UTILS_create_file_for_shared_read_and_write</a>(&amp;priority_file_handle, command_line_args.<a class="code" href="structfactori__args__s.html#a05369ef03cb7e97fd2a5448fa4993efb">p_priority_file_name</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keyword">const</span> DWORD priorities_file_size = GetFileSize(priority_file_handle, NULL);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">// for each line, read the line digits, convert to a number and add it to queue</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        DWORD        current_position = 0;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        DWORD        bytes_read       = 0;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="structqueue__elem__s.html">queue_elem_t</a> new_element      = <a class="code" href="queue__ext_8h.html#a1674fd68ced4f60de29e1089924f2614">NULL_QUEUE_ELEMENT</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">while</span>(current_position &lt; priorities_file_size)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            e_status = <a class="code" href="file__utils__ext_8h.html#ac483ad62d3ca895678cffe3a53744f32">FILE_UTILS_read_one_line_from_file</a>(priority_file_handle, &amp;bytes_read, &amp;new_element.<a class="code" href="structqueue__elem__s.html#a4132b46b4901a516175050042022a791">data</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            e_status =  <a class="code" href="queue__ext_8h.html#a8b324b766f9ec79f8a6b8d7f54cd9d30">QUEUE_push</a>(p_task_priority_queue, new_element);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            current_position += bytes_read;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="comment">// get task file size, will be used to read line by line (ReadFile does not stop at EOF)</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        e_status = <a class="code" href="file__utils__ext_8h.html#ad4637d1602e581b018988f78767d5f5f">FILE_UTILS_create_file_for_shared_read_and_write</a>(&amp;task_file_handle, command_line_args.<a class="code" href="structfactori__args__s.html#a0ae7de72f63571717d15a5668b83c8df">a_task_file_name</a>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keyword">const</span> DWORD tasks_file_size = GetFileSize(task_file_handle, NULL);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">if</span>(task_file_handle &amp;&amp; (task_file_handle != INVALID_HANDLE_VALUE))</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            CloseHandle(task_file_handle);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            task_file_handle = NULL;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <a class="code" href="file__utils__ext_8h.html#aa7d90eddf0161c6ee6b16f7cf59d6525">FILE_UTILS_set_write_position</a>(tasks_file_size);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="comment">/*------------------------------</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">        * Call workers (threads)</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">        * ---------------------------*/</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">if</span> (command_line_args.<a class="code" href="structfactori__args__s.html#a639f825edc175c42483bba7c67ff7ff7">num_of_threads</a> == 0)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        pa_working_threads_handles = malloc(command_line_args.<a class="code" href="structfactori__args__s.html#a639f825edc175c42483bba7c67ff7ff7">num_of_threads</a> * <span class="keyword">sizeof</span>(HANDLE));</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">if</span>(NULL == pa_working_threads_handles)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <a class="code" href="trace_8h.html#a9e1da3f98202e27d74c6309dec5e8dbf">print_error_msg</a>(<span class="stringliteral">&quot;Failed to allocate memory for workers handles\n&quot;</span>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a5ffa8953d8668e40c26f99ba884847b8">ERROR_FAILED_TO_ALLOCATE_MEMORY_E</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        p_workers_params           = malloc(command_line_args.<a class="code" href="structfactori__args__s.html#a639f825edc175c42483bba7c67ff7ff7">num_of_threads</a> * <span class="keyword">sizeof</span>(<a class="code" href="structworker__params__s.html">worker_params_t</a>));</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span>(NULL == p_workers_params)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <a class="code" href="trace_8h.html#a9e1da3f98202e27d74c6309dec5e8dbf">print_error_msg</a>(<span class="stringliteral">&quot;Failed to allocate memory for workers params\n&quot;</span>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a5ffa8953d8668e40c26f99ba884847b8">ERROR_FAILED_TO_ALLOCATE_MEMORY_E</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="trace_8h.html#a88edd2aa4feabff4af21a997d5d8aa23">DEBUG_PRINT</a>(<a class="code" href="trace_8h.html#a8ff10b75745acf0409de91ac1db60a20">DEBUG_LEVEL_FIVE</a>, <span class="stringliteral">&quot;Starting to call workers. Total number: %d\n&quot;</span>, command_line_args.<a class="code" href="structfactori__args__s.html#a639f825edc175c42483bba7c67ff7ff7">num_of_threads</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">for</span>(DWORD worker_idx = 0; worker_idx &lt; command_line_args.<a class="code" href="structfactori__args__s.html#a639f825edc175c42483bba7c67ff7ff7">num_of_threads</a>; worker_idx++)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">if</span> (command_line_args.<a class="code" href="structfactori__args__s.html#a639f825edc175c42483bba7c67ff7ff7">num_of_threads</a> != 0)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                errno_t strcpy_status = strcpy_s(p_workers_params[worker_idx].a_tasks_file_name, MAX_PATH, command_line_args.<a class="code" href="structfactori__args__s.html#a0ae7de72f63571717d15a5668b83c8df">a_task_file_name</a>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                <span class="keywordflow">if</span>(strcpy_status)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                    <a class="code" href="trace_8h.html#a9e1da3f98202e27d74c6309dec5e8dbf">print_error_msg</a>(<span class="stringliteral">&quot;Failed to copy string of task file\n&quot;</span>)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a476a73158bf7252482fc4ce97e1fa3f0">ERROR_STRCPY_FAILED_E</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                p_workers_params[worker_idx].p_queue              = p_task_priority_queue;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                p_workers_params[worker_idx].p_lock_queue         = p_lock_queue;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                p_workers_params[worker_idx].p_lock_tasks_file    = p_lock_tasks_file;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                pa_working_threads_handles[worker_idx]            = NULL;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                e_status = <a class="code" href="factori_8c.html#ad0a6e0d0a136e229ecf00fd6593c402e">create_worker</a>(&amp;pa_working_threads_handles[worker_idx], &amp;p_workers_params[worker_idx]);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    } while (FALSE);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">/*------------------------------</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">    * Cleanup: Free memory, Close handles</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">    * ---------------------------*/</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    if(pa_working_threads_handles)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        DWORD status = WaitForMultipleObjects(command_line_args.<a class="code" href="structfactori__args__s.html#a639f825edc175c42483bba7c67ff7ff7">num_of_threads</a>, pa_working_threads_handles, TRUE, <a class="code" href="common__types_8h.html#a1cbe46e7449a2faf865dbd9f942881ae">FIVE_MINUTES_IN_MILLISECONDS</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <a class="code" href="trace_8h.html#a88edd2aa4feabff4af21a997d5d8aa23">DEBUG_PRINT</a>(<a class="code" href="trace_8h.html#adab028ad33c1ace2ad2bc51c6aad0ac4">DEBUG_LEVEL_ONE</a>, <span class="stringliteral">&quot;WaitForMultipleObjects returned with status: %d\n&quot;</span>, status);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">for</span>(DWORD worker_idx = 0; worker_idx &lt; command_line_args.<a class="code" href="structfactori__args__s.html#a639f825edc175c42483bba7c67ff7ff7">num_of_threads</a>; worker_idx++)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keywordflow">if</span>(pa_working_threads_handles[worker_idx])</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                BOOL get_exit_code_stat = GetExitCodeThread(</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    pa_working_threads_handles[worker_idx],</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    (LPDWORD)(&amp;e_status)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    );</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                <span class="keywordflow">if</span>(FALSE == get_exit_code_stat)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232ab090e5181dad1d2fc22dbdc768af5c54">ERROR_FAILED_TO_GET_THREAD_EXIT_CODE_E</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    <a class="code" href="trace_8h.html#a9e1da3f98202e27d74c6309dec5e8dbf">print_error_msg</a>(<span class="stringliteral">&quot;Failed to get thread %d exit code\n&quot;</span>, worker_idx);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">for</span>(DWORD worker_idx = 0; worker_idx &lt; command_line_args.<a class="code" href="structfactori__args__s.html#a639f825edc175c42483bba7c67ff7ff7">num_of_threads</a>; worker_idx++)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">if</span>(pa_working_threads_handles[worker_idx])</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                CloseHandle(pa_working_threads_handles[worker_idx]);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                pa_working_threads_handles[worker_idx] = NULL;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        free(pa_working_threads_handles);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span>(p_task_priority_queue)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        e_status += <a class="code" href="queue__ext_8h.html#a404707c34930328e4b2bdcd53e600c79">QUEUE_destroy_queue</a>(&amp;p_task_priority_queue);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span>(p_lock_tasks_file)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        e_status += <a class="code" href="lock__ext_8h.html#a574e3fa24bc964d06eb31813fe80eae0">LOCK_destroy_lock</a>(&amp;p_lock_tasks_file);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span>(p_lock_queue)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        e_status += <a class="code" href="lock__ext_8h.html#a574e3fa24bc964d06eb31813fe80eae0">LOCK_destroy_lock</a>(&amp;p_lock_queue);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span>(priority_file_handle)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        CloseHandle(priority_file_handle);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        priority_file_handle = NULL;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span>(task_file_handle &amp;&amp; (task_file_handle != INVALID_HANDLE_VALUE))</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        CloseHandle(task_file_handle);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        task_file_handle = NULL;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span>(p_workers_params)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        free(p_workers_params);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">return</span> e_status;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="command__line__parsing__ext_8h_source.html#l00037">factori_args_s::a_task_file_name</a>, <a class="el" href="trace_8h_source.html#l00052">CHECK_AND_BREAK</a>, <a class="el" href="factori_8c_source.html#l00243">create_worker()</a>, <a class="el" href="queue__ext_8h_source.html#l00049">queue_elem_s::data</a>, <a class="el" href="trace_8h_source.html#l00089">DEBUG_LEVEL_FIVE</a>, <a class="el" href="trace_8h_source.html#l00085">DEBUG_LEVEL_ONE</a>, <a class="el" href="trace_8h_source.html#l00169">DEBUG_PRINT</a>, <a class="el" href="common__types_8h_source.html#l00047">ERROR_FAILED_TO_ALLOCATE_MEMORY_E</a>, <a class="el" href="common__types_8h_source.html#l00076">ERROR_FAILED_TO_GET_THREAD_EXIT_CODE_E</a>, <a class="el" href="common__types_8h_source.html#l00081">ERROR_FAILES_TO_INITIALIZE_LOCK_E</a>, <a class="el" href="common__types_8h_source.html#l00072">ERROR_FAILES_TO_INITIALIZE_QUEUE_E</a>, <a class="el" href="common__types_8h_source.html#l00054">ERROR_STRCPY_FAILED_E</a>, <a class="el" href="file__utils_8c_source.html#l00133">FILE_UTILS_create_file_for_shared_read_and_write()</a>, <a class="el" href="file__utils_8c_source.html#l00049">FILE_UTILS_read_one_line_from_file()</a>, <a class="el" href="file__utils_8c_source.html#l00031">FILE_UTILS_set_write_position()</a>, <a class="el" href="common__types_8h_source.html#l00022">FIVE_MINUTES_IN_MILLISECONDS</a>, <a class="el" href="lock_8c_source.html#l00275">LOCK_destroy_lock()</a>, <a class="el" href="lock_8c_source.html#l00025">LOCK_initialize_lock()</a>, <a class="el" href="queue__ext_8h_source.html#l00027">NULL_QUEUE_ELEMENT</a>, <a class="el" href="command__line__parsing__ext_8h_source.html#l00039">factori_args_s::num_of_threads</a>, <a class="el" href="factori_8h_source.html#l00047">worker_params_s::p_lock_queue</a>, <a class="el" href="factori_8h_source.html#l00048">worker_params_s::p_lock_tasks_file</a>, <a class="el" href="command__line__parsing__ext_8h_source.html#l00038">factori_args_s::p_priority_file_name</a>, <a class="el" href="factori_8h_source.html#l00046">worker_params_s::p_queue</a>, <a class="el" href="command__line__parsing_8c_source.html#l00041">parse_command_line_input()</a>, <a class="el" href="trace_8h_source.html#l00042">print_error_msg</a>, <a class="el" href="queue_8c_source.html#l00234">QUEUE_destroy_queue()</a>, <a class="el" href="queue_8c_source.html#l00031">QUEUE_initialize_queue()</a>, and <a class="el" href="queue_8c_source.html#l00151">QUEUE_push()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="factori_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph.png" border="0" usemap="#afactori_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph" alt=""/></div>
<map name="factori_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph" id="factori_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph">
<area shape="rect" title="&lt; When we want to test a specific function/ scenario compile with that flag, when done,..." alt="" coords="5,739,56,766"/>
<area shape="rect" href="factori_8c.html#ad0a6e0d0a136e229ecf00fd6593c402e" title="Create a worker object: Packs parameters into a struct, and calls CreateThread." alt="" coords="135,474,239,501"/>
<area shape="rect" href="file__utils__ext_8h.html#ad4637d1602e581b018988f78767d5f5f" title="Creates a file handle for shared Read and WRITE." alt="" coords="529,5,715,47"/>
<area shape="rect" href="file__utils__ext_8h.html#ac483ad62d3ca895678cffe3a53744f32" title="Read a single line, that is, all charecters until \r &#160;(including). Outputs the number of charcters th..." alt="" coords="545,71,699,112"/>
<area shape="rect" href="file__utils__ext_8h.html#aa7d90eddf0161c6ee6b16f7cf59d6525" title="Set global file position for writing." alt="" coords="110,761,265,803"/>
<area shape="rect" href="lock__ext_8h.html#a574e3fa24bc964d06eb31813fe80eae0" title="Close all handles of the sync objects. Free the allocated memory, and set the pointer to the struct t..." alt="" coords="118,827,257,854"/>
<area shape="rect" href="lock__ext_8h.html#a1438450e8ec75fb3feb6ce67a503d779" title="Initialize a lock struct, All three sync object are created but not assigned to anyone yet...." alt="" coords="116,878,259,905"/>
<area shape="rect" href="command__line__parsing__ext_8h.html#a48746ebf755019b062fe43d17259c7ef" title="parsing the command line, validates input integrity and fills the arg structure. CAUTION: This functi..." alt="" coords="115,929,260,971"/>
<area shape="rect" href="queue__ext_8h.html#a404707c34930328e4b2bdcd53e600c79" title="Frees all elements in the queue, then free the queue struct and sets it to NULL." alt="" coords="319,659,481,686"/>
<area shape="rect" href="queue__ext_8h.html#a8777304a9bca1e8917a46edd1e4209aa" title="Initiliaze a new queue struct. The new queue will be initialized as empty, that is,..." alt="" coords="104,995,271,1022"/>
<area shape="rect" href="queue__ext_8h.html#a8b324b766f9ec79f8a6b8d7f54cd9d30" title="Add a queue element to queue as the p_last_elem element, will also be the p_first_elem if queue was e..." alt="" coords="135,710,240,737"/>
<area shape="rect" href="factori_8c.html#acc1487cb2f24894cf9c48a718c302503" title="As the name suggests, does most of the work load expected from the program. Details are found in the ..." alt="" coords="348,339,452,366"/>
<area shape="rect" href="file__utils__ext_8h.html#aa61cde9f0eda8ca94b81c2b9ea7efcd9" title="The function prints a line into a buffer according to requirments." alt="" coords="558,339,686,366"/>
<area shape="rect" href="file__utils__ext_8h.html#a6ba806c9791793d2e17d9c65745589ad" title="Write a buffer (string) to a file." alt="" coords="537,391,707,432"/>
<area shape="rect" href="lock__ext_8h.html#ad998fe7d10043d8d0119913c1104f131" title="Lock a resource (can be what ever resource you want) for readinging. That is, any number of readers c..." alt="" coords="561,457,683,483"/>
<area shape="rect" href="lock__ext_8h.html#a387d3cd06fb2999414bd1c60a0214649" title="Release the readers lock." alt="" coords="553,507,691,534"/>
<area shape="rect" href="lock__ext_8h.html#a5d3201469d7c49626a752c11c7760b10" title="Lock a resource for writing. That is, exclusive access, to a specific resource. No other readers or w..." alt="" coords="560,187,684,214"/>
<area shape="rect" href="lock__ext_8h.html#a83e03a05b849ad0ca826de75fe29b2cb" title="Release the write lock." alt="" coords="551,238,693,265"/>
<area shape="rect" href="prime__ext_8h.html#ab1cd6cee23a302a6ac6af9cd7dabb8cb" title="Compute the prime factors of a given POSITIVE number. 0 is not allowed, and 1 has no prime factors." alt="" coords="554,289,690,315"/>
<area shape="rect" href="queue__ext_8h.html#a9bc9b6a4ce45ab9e7bd2beb99646a892" title="Returns true if the queue is empty and false otherwise. (Also checks the validity of the queuewhen ac..." alt="" coords="565,609,679,635"/>
<area shape="rect" href="queue__ext_8h.html#a59dd29666d51f1070ecc907c638f2018" title="Removed the top queue element from the queue. If called on empty queue does nothing,..." alt="" coords="573,137,671,163"/>
<area shape="rect" href="queue__ext_8h.html#af1c113374e964f484498f3fa67352e7d" title="Given a queue, return the top element of the queue. On fail: reutrn a &quot;NULL Queue element&quot;,..." alt="" coords="575,558,669,585"/>
<area shape="rect" href="queue_8c.html#a6d7944c7e57a033b8127b413b9539d47" title="A queue is valid in two cases: 1) Not&#45;empty: if queue is not empty, count is greater than zero,..." alt="" coords="763,634,925,661"/>
<area shape="rect" href="lock_8c.html#a6e8492c210a454d788c5e17a81398912" title="Close all handles of the sync objects. Free the allocated memory, and set the pointer to the struct t..." alt="" coords="331,878,469,905"/>
<area shape="rect" href="command__line__parsing_8c.html#abec7de20c29cd0444d46f8c5af93e301" title="converts string to int. Validates string has only numbers." alt="" coords="329,929,471,955"/>
<area shape="rect" href="command__line__parsing_8c.html#a8b53c718f6779378d21946d66ca14ec4" title="converts string to int. Validates string has only numbers." alt="" coords="323,979,477,1006"/>
<area shape="rect" href="command__line__parsing_8c.html#a3e2c45f563fe312051564da5922fc741" title="print the command line usage for Factori program." alt="" coords="339,1030,461,1057"/>
<area shape="rect" href="command__line__parsing_8c.html#ad785d9d76730f07ca1ce0f5797ca178d" title="Get the int from string object extract digits character from string." alt="" coords="555,954,689,981"/>
<area shape="rect" href="queue_8c.html#a9bc9b6a4ce45ab9e7bd2beb99646a892" title="Is the queue empty? returns true when empty." alt="" coords="565,710,679,737"/>
<area shape="rect" href="queue_8c.html#a367f4872ef35f4e649ab1da4da1626c1" title="Allocate memory for a queue element and set the data with input parameter Return the pointer to the n..." alt="" coords="323,812,477,853"/>
</map>
</div>

</div>
</div>
<a id="acc1487cb2f24894cf9c48a718c302503"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc1487cb2f24894cf9c48a718c302503">&#9670;&nbsp;</a></span>worker_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static DWORD WINAPI worker_thread </td>
          <td>(</td>
          <td class="paramtype">LPVOID&#160;</td>
          <td class="paramname"><em>lpParam</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>As the name suggests, does most of the work load expected from the program. Details are found in the <a class="el" href="readme_8md.html">readme.md</a> file and in the brief of this entire file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lpParam</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DWORD </dd></dl>

<p class="definition">Definition at line <a class="el" href="factori_8c_source.html#l00296">296</a> of file <a class="el" href="factori_8c_source.html">factori.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;{</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// Debug Prefix /////////////</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="trace_8h.html#ad4ed3d5d742c56a417076ab5e1a5dd29">DEBUG_PRINT_FUNCTION_START</a>();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232">error_e</a> e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232aadeb5032c03491611646c1c64f7c0e0c">ERROR_OK</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="structworker__params__s.html">worker_params_t</a> *p_worker_params = (<a class="code" href="structworker__params__s.html">worker_params_t</a>*)lpParam;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    HANDLE tasks_file_handle = NULL;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordtype">char</span>* p_output_buffer = NULL;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="structqueue__elem__s.html">queue_elem_t</a> task_position = {0};</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="comment">// Open task file for reading</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        e_status = <a class="code" href="file__utils__ext_8h.html#ad4637d1602e581b018988f78767d5f5f">FILE_UTILS_create_file_for_shared_read_and_write</a>(&amp;tasks_file_handle, p_worker_params-&gt;<a class="code" href="structworker__params__s.html#a6a7695ab492ad6eb66512cc155b184c4">a_tasks_file_name</a>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">while</span>(TRUE)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            e_status = <a class="code" href="lock__ext_8h.html#a5d3201469d7c49626a752c11c7760b10">LOCK_write_lock</a>(p_worker_params-&gt;<a class="code" href="structworker__params__s.html#ac119332d5ac44045e1c7d27e23263947">p_lock_queue</a>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            BOOL b_is_empty = <a class="code" href="queue__ext_8h.html#a9bc9b6a4ce45ab9e7bd2beb99646a892">QUEUE_empty</a>(p_worker_params-&gt;<a class="code" href="structworker__params__s.html#a33c0a8e7a6412053b789120446f93419">p_queue</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">if</span>(FALSE == b_is_empty)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                task_position = <a class="code" href="queue__ext_8h.html#af1c113374e964f484498f3fa67352e7d">QUEUE_top</a>(p_worker_params-&gt;<a class="code" href="structworker__params__s.html#a33c0a8e7a6412053b789120446f93419">p_queue</a>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                e_status = <a class="code" href="queue__ext_8h.html#a59dd29666d51f1070ecc907c638f2018">QUEUE_pop</a>(p_worker_params-&gt;<a class="code" href="structworker__params__s.html#a33c0a8e7a6412053b789120446f93419">p_queue</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                e_status = <a class="code" href="lock__ext_8h.html#a83e03a05b849ad0ca826de75fe29b2cb">LOCK_write_release</a>(p_worker_params-&gt;<a class="code" href="structworker__params__s.html#ac119332d5ac44045e1c7d27e23263947">p_lock_queue</a>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            e_status = <a class="code" href="lock__ext_8h.html#a83e03a05b849ad0ca826de75fe29b2cb">LOCK_write_release</a>(p_worker_params-&gt;<a class="code" href="structworker__params__s.html#ac119332d5ac44045e1c7d27e23263947">p_lock_queue</a>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            SetFilePointer(tasks_file_handle, task_position.<a class="code" href="structqueue__elem__s.html#a4132b46b4901a516175050042022a791">data</a>, NULL, FILE_BEGIN);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            DWORD bytes_read_from_file;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            DWORD target_number;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            e_status = <a class="code" href="lock__ext_8h.html#ad998fe7d10043d8d0119913c1104f131">LOCK_read_lock</a>(p_worker_params-&gt;<a class="code" href="structworker__params__s.html#a2e86a302da7bea84d2f127e64cb4e8bb">p_lock_tasks_file</a>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            e_status = <a class="code" href="file__utils__ext_8h.html#ac483ad62d3ca895678cffe3a53744f32">FILE_UTILS_read_one_line_from_file</a>(tasks_file_handle, &amp;bytes_read_from_file, &amp;target_number);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            e_status = <a class="code" href="lock__ext_8h.html#a387d3cd06fb2999414bd1c60a0214649">LOCK_read_release</a>(p_worker_params-&gt;<a class="code" href="structworker__params__s.html#a2e86a302da7bea84d2f127e64cb4e8bb">p_lock_tasks_file</a>);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <a class="code" href="trace_8h.html#a88edd2aa4feabff4af21a997d5d8aa23">DEBUG_PRINT</a>(<a class="code" href="trace_8h.html#a8ff10b75745acf0409de91ac1db60a20">DEBUG_LEVEL_FIVE</a>, <span class="stringliteral">&quot;Thread id: %d, Starting work on target num: %d\n&quot;</span>, GetCurrentThreadId(), target_number);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            DWORD primes_array[<a class="code" href="prime__ext_8h.html#aeda79141e86c1f59251301eb61b0d3ee">MAX_NUMBER_OF_PRIMES</a>] = {0};</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            DWORD number_of_primes = 0;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            e_status = <a class="code" href="prime__ext_8h.html#ab1cd6cee23a302a6ac6af9cd7dabb8cb">PRIME_get_primes</a>(target_number, primes_array, &amp;number_of_primes);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            DWORD bytes_in_line = 0;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            p_output_buffer = (<span class="keywordtype">char</span>*)malloc((<a class="code" href="file__utils__ext_8h.html#a3c208f29f0217c1c57eb8ba4e1a151e5">CHAR_SIZE_OF_FIRST_LINE</a> + (<a class="code" href="file__utils__ext_8h.html#a9b118d96de984eb21f418e288622ecde">MAX_NUMBER_OF_DIGITS</a>+<a class="code" href="file__utils__ext_8h.html#adf93eb0cba8a591cfec87d854663d791">CHAR_SIZE_OF_LINE_FOR_EACH_PRIME</a>)*(number_of_primes + 1))*<span class="keyword">sizeof</span>(char));</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">if</span> (NULL == p_output_buffer)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                <a class="code" href="trace_8h.html#a9e1da3f98202e27d74c6309dec5e8dbf">print_error_msg</a>(<span class="stringliteral">&quot;Malloc for p_output_buffer failed\n&quot;</span>);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                e_status = <a class="code" href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a5ffa8953d8668e40c26f99ba884847b8">ERROR_FAILED_TO_ALLOCATE_MEMORY_E</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            e_status = <a class="code" href="file__utils__ext_8h.html#aa61cde9f0eda8ca94b81c2b9ea7efcd9">create_output_line</a>(target_number, primes_array, number_of_primes, p_output_buffer, &amp;bytes_in_line);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            e_status = <a class="code" href="lock__ext_8h.html#a5d3201469d7c49626a752c11c7760b10">LOCK_write_lock</a>(p_worker_params-&gt;<a class="code" href="structworker__params__s.html#a2e86a302da7bea84d2f127e64cb4e8bb">p_lock_tasks_file</a>);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            e_status = <a class="code" href="file__utils__ext_8h.html#a6ba806c9791793d2e17d9c65745589ad">FILE_UTILS_write_buffer_to_file</a>(tasks_file_handle, p_output_buffer, bytes_in_line);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            e_status = <a class="code" href="lock__ext_8h.html#a83e03a05b849ad0ca826de75fe29b2cb">LOCK_write_release</a>(p_worker_params-&gt;<a class="code" href="structworker__params__s.html#a2e86a302da7bea84d2f127e64cb4e8bb">p_lock_tasks_file</a>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <a class="code" href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a>(e_status);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    } <span class="keywordflow">while</span> (FALSE);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">/*------------------------------</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">    * Cleanup: Free memory, Close handles</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">    * ----------------------------*/</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span>(tasks_file_handle &amp;&amp; (tasks_file_handle != INVALID_HANDLE_VALUE))</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        CloseHandle(tasks_file_handle);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        tasks_file_handle = NULL;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span> (p_output_buffer)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        free(p_output_buffer);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">// Debug Suffix /////////////</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="trace_8h.html#afc1d6b99a4c100f81e56388c74b63cf1">DEBUG_PRINT_FUNCTION_END</a>();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">return</span> (DWORD)e_status;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="factori_8h_source.html#l00045">worker_params_s::a_tasks_file_name</a>, <a class="el" href="file__utils__ext_8h_source.html#l00030">CHAR_SIZE_OF_FIRST_LINE</a>, <a class="el" href="file__utils__ext_8h_source.html#l00032">CHAR_SIZE_OF_LINE_FOR_EACH_PRIME</a>, <a class="el" href="trace_8h_source.html#l00052">CHECK_AND_BREAK</a>, <a class="el" href="file__utils_8c_source.html#l00228">create_output_line()</a>, <a class="el" href="queue__ext_8h_source.html#l00049">queue_elem_s::data</a>, <a class="el" href="trace_8h_source.html#l00089">DEBUG_LEVEL_FIVE</a>, <a class="el" href="trace_8h_source.html#l00169">DEBUG_PRINT</a>, <a class="el" href="trace_8h_source.html#l00172">DEBUG_PRINT_FUNCTION_END</a>, <a class="el" href="trace_8h_source.html#l00171">DEBUG_PRINT_FUNCTION_START</a>, <a class="el" href="common__types_8h_source.html#l00047">ERROR_FAILED_TO_ALLOCATE_MEMORY_E</a>, <a class="el" href="common__types_8h_source.html#l00044">ERROR_OK</a>, <a class="el" href="file__utils_8c_source.html#l00133">FILE_UTILS_create_file_for_shared_read_and_write()</a>, <a class="el" href="file__utils_8c_source.html#l00049">FILE_UTILS_read_one_line_from_file()</a>, <a class="el" href="file__utils_8c_source.html#l00182">FILE_UTILS_write_buffer_to_file()</a>, <a class="el" href="lock_8c_source.html#l00109">LOCK_read_lock()</a>, <a class="el" href="lock_8c_source.html#l00165">LOCK_read_release()</a>, <a class="el" href="lock_8c_source.html#l00211">LOCK_write_lock()</a>, <a class="el" href="lock_8c_source.html#l00238">LOCK_write_release()</a>, <a class="el" href="file__utils__ext_8h_source.html#l00028">MAX_NUMBER_OF_DIGITS</a>, <a class="el" href="prime__ext_8h_source.html#l00031">MAX_NUMBER_OF_PRIMES</a>, <a class="el" href="factori_8h_source.html#l00047">worker_params_s::p_lock_queue</a>, <a class="el" href="factori_8h_source.html#l00048">worker_params_s::p_lock_tasks_file</a>, <a class="el" href="factori_8h_source.html#l00046">worker_params_s::p_queue</a>, <a class="el" href="prime_8c_source.html#l00033">PRIME_get_primes()</a>, <a class="el" href="trace_8h_source.html#l00042">print_error_msg</a>, <a class="el" href="queue_8c_source.html#l00206">QUEUE_empty()</a>, <a class="el" href="queue_8c_source.html#l00103">QUEUE_pop()</a>, and <a class="el" href="queue_8c_source.html#l00066">QUEUE_top()</a>.</p>

<p class="reference">Referenced by <a class="el" href="factori_8c_source.html#l00243">create_worker()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="factori_8c_acc1487cb2f24894cf9c48a718c302503_cgraph.png" border="0" usemap="#afactori_8c_acc1487cb2f24894cf9c48a718c302503_cgraph" alt=""/></div>
<map name="factori_8c_acc1487cb2f24894cf9c48a718c302503_cgraph" id="factori_8c_acc1487cb2f24894cf9c48a718c302503_cgraph">
<area shape="rect" title="As the name suggests, does most of the work load expected from the program. Details are found in the ..." alt="" coords="5,329,109,356"/>
<area shape="rect" href="file__utils__ext_8h.html#aa61cde9f0eda8ca94b81c2b9ea7efcd9" title="The function prints a line into a buffer according to requirments." alt="" coords="186,5,314,32"/>
<area shape="rect" href="file__utils__ext_8h.html#ad4637d1602e581b018988f78767d5f5f" title="Creates a file handle for shared Read and WRITE." alt="" coords="157,57,343,98"/>
<area shape="rect" href="file__utils__ext_8h.html#ac483ad62d3ca895678cffe3a53744f32" title="Read a single line, that is, all charecters until \r &#160;(including). Outputs the number of charcters th..." alt="" coords="173,122,327,163"/>
<area shape="rect" href="file__utils__ext_8h.html#a6ba806c9791793d2e17d9c65745589ad" title="Write a buffer (string) to a file." alt="" coords="165,187,335,229"/>
<area shape="rect" href="lock__ext_8h.html#ad998fe7d10043d8d0119913c1104f131" title="Lock a resource (can be what ever resource you want) for readinging. That is, any number of readers c..." alt="" coords="189,253,311,280"/>
<area shape="rect" href="lock__ext_8h.html#a387d3cd06fb2999414bd1c60a0214649" title="Release the readers lock." alt="" coords="181,304,319,331"/>
<area shape="rect" href="lock__ext_8h.html#a5d3201469d7c49626a752c11c7760b10" title="Lock a resource for writing. That is, exclusive access, to a specific resource. No other readers or w..." alt="" coords="188,355,312,381"/>
<area shape="rect" href="lock__ext_8h.html#a83e03a05b849ad0ca826de75fe29b2cb" title="Release the write lock." alt="" coords="179,405,321,432"/>
<area shape="rect" href="prime__ext_8h.html#ab1cd6cee23a302a6ac6af9cd7dabb8cb" title="Compute the prime factors of a given POSITIVE number. 0 is not allowed, and 1 has no prime factors." alt="" coords="182,456,318,483"/>
<area shape="rect" href="queue__ext_8h.html#a9bc9b6a4ce45ab9e7bd2beb99646a892" title="Returns true if the queue is empty and false otherwise. (Also checks the validity of the queuewhen ac..." alt="" coords="193,507,307,533"/>
<area shape="rect" href="queue__ext_8h.html#a59dd29666d51f1070ecc907c638f2018" title="Removed the top queue element from the queue. If called on empty queue does nothing,..." alt="" coords="201,557,299,584"/>
<area shape="rect" href="queue__ext_8h.html#af1c113374e964f484498f3fa67352e7d" title="Given a queue, return the top element of the queue. On fail: reutrn a &quot;NULL Queue element&quot;,..." alt="" coords="203,608,297,635"/>
<area shape="rect" href="queue_8c.html#a6d7944c7e57a033b8127b413b9539d47" title="A queue is valid in two cases: 1) Not&#45;empty: if queue is not empty, count is greater than zero,..." alt="" coords="391,557,553,584"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="factori_8c_acc1487cb2f24894cf9c48a718c302503_icgraph.png" border="0" usemap="#afactori_8c_acc1487cb2f24894cf9c48a718c302503_icgraph" alt=""/></div>
<map name="factori_8c_acc1487cb2f24894cf9c48a718c302503_icgraph" id="factori_8c_acc1487cb2f24894cf9c48a718c302503_icgraph">
<area shape="rect" title="As the name suggests, does most of the work load expected from the program. Details are found in the ..." alt="" coords="256,5,360,32"/>
<area shape="rect" href="factori_8c.html#ad0a6e0d0a136e229ecf00fd6593c402e" title="Create a worker object: Packs parameters into a struct, and calls CreateThread." alt="" coords="104,5,208,32"/>
<area shape="rect" href="factori_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="&lt; When we want to test a specific function/ scenario compile with that flag, when done,..." alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aqueue__ext_8h_html_afa81aaef004c00ea3f90c1b7cd2317e5"><div class="ttname"><a href="queue__ext_8h.html#afa81aaef004c00ea3f90c1b7cd2317e5">DEBUG_PRINT_QUEUE_STATUS</a></div><div class="ttdeci">#define DEBUG_PRINT_QUEUE_STATUS(...)</div><div class="ttdef"><b>Definition:</b> <a href="queue__ext_8h_source.html#l00036">queue_ext.h:36</a></div></div>
<div class="ttc" id="aprime__ext_8h_html_aeda79141e86c1f59251301eb61b0d3ee"><div class="ttname"><a href="prime__ext_8h.html#aeda79141e86c1f59251301eb61b0d3ee">MAX_NUMBER_OF_PRIMES</a></div><div class="ttdeci">#define MAX_NUMBER_OF_PRIMES</div><div class="ttdoc">Since the biggest number allowed is smaller that 2^30 (instruction mentions up to nine digts number)....</div><div class="ttdef"><b>Definition:</b> <a href="prime__ext_8h_source.html#l00031">prime_ext.h:31</a></div></div>
<div class="ttc" id="atrace_8h_html_a04f52cd3d2fada8961ec1d353ac5509d"><div class="ttname"><a href="trace_8h.html#a04f52cd3d2fada8961ec1d353ac5509d">DEBUG_PRINT_ARG</a></div><div class="ttdeci">#define DEBUG_PRINT_ARG(...)</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00170">trace.h:170</a></div></div>
<div class="ttc" id="aqueue__ext_8h_html_a8b324b766f9ec79f8a6b8d7f54cd9d30"><div class="ttname"><a href="queue__ext_8h.html#a8b324b766f9ec79f8a6b8d7f54cd9d30">QUEUE_push</a></div><div class="ttdeci">error_e QUEUE_push(queue_t *p_queue, queue_elem_t new_element)</div><div class="ttdoc">Add a queue element to queue as the p_last_elem element, will also be the p_first_elem if queue was e...</div><div class="ttdef"><b>Definition:</b> <a href="queue_8c_source.html#l00151">queue.c:151</a></div></div>
<div class="ttc" id="acommon__types_8h_html_a1cbe46e7449a2faf865dbd9f942881ae"><div class="ttname"><a href="common__types_8h.html#a1cbe46e7449a2faf865dbd9f942881ae">FIVE_MINUTES_IN_MILLISECONDS</a></div><div class="ttdeci">#define FIVE_MINUTES_IN_MILLISECONDS</div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00022">common_types.h:22</a></div></div>
<div class="ttc" id="afile__utils__ext_8h_html_a6ba806c9791793d2e17d9c65745589ad"><div class="ttname"><a href="file__utils__ext_8h.html#a6ba806c9791793d2e17d9c65745589ad">FILE_UTILS_write_buffer_to_file</a></div><div class="ttdeci">error_e FILE_UTILS_write_buffer_to_file(HANDLE p_file_handle, const char buffer_to_write[], const DWORD num_of_bytes)</div><div class="ttdoc">Write a buffer (string) to a file.</div><div class="ttdef"><b>Definition:</b> <a href="file__utils_8c_source.html#l00182">file_utils.c:182</a></div></div>
<div class="ttc" id="astructworker__params__s_html"><div class="ttname"><a href="structworker__params__s.html">worker_params_s</a></div><div class="ttdoc">Packing all the worker parameters. Since the worker has to have an (void*) input parameters....</div><div class="ttdef"><b>Definition:</b> <a href="factori_8h_source.html#l00043">factori.h:44</a></div></div>
<div class="ttc" id="acommon__types_8h_html_a09c25ad25f326a930ae42ace60b70232ab090e5181dad1d2fc22dbdc768af5c54"><div class="ttname"><a href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232ab090e5181dad1d2fc22dbdc768af5c54">ERROR_FAILED_TO_GET_THREAD_EXIT_CODE_E</a></div><div class="ttdeci">@ ERROR_FAILED_TO_GET_THREAD_EXIT_CODE_E</div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00076">common_types.h:76</a></div></div>
<div class="ttc" id="atrace_8h_html_ad4ed3d5d742c56a417076ab5e1a5dd29"><div class="ttname"><a href="trace_8h.html#ad4ed3d5d742c56a417076ab5e1a5dd29">DEBUG_PRINT_FUNCTION_START</a></div><div class="ttdeci">#define DEBUG_PRINT_FUNCTION_START()</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00171">trace.h:171</a></div></div>
<div class="ttc" id="aqueue__ext_8h_html_a8777304a9bca1e8917a46edd1e4209aa"><div class="ttname"><a href="queue__ext_8h.html#a8777304a9bca1e8917a46edd1e4209aa">QUEUE_initialize_queue</a></div><div class="ttdeci">queue_t * QUEUE_initialize_queue(void)</div><div class="ttdoc">Initiliaze a new queue struct. The new queue will be initialized as empty, that is,...</div><div class="ttdef"><b>Definition:</b> <a href="queue_8c_source.html#l00031">queue.c:31</a></div></div>
<div class="ttc" id="astructqueue__elem__s_html"><div class="ttname"><a href="structqueue__elem__s.html">queue_elem_s</a></div><div class="ttdoc">An element of FIFO queue. Hold on a generic data, here limited to a DWORD type. And a pointer to the ...</div><div class="ttdef"><b>Definition:</b> <a href="queue__ext_8h_source.html#l00047">queue_ext.h:48</a></div></div>
<div class="ttc" id="afactori_8c_html_ad0a6e0d0a136e229ecf00fd6593c402e"><div class="ttname"><a href="factori_8c.html#ad0a6e0d0a136e229ecf00fd6593c402e">create_worker</a></div><div class="ttdeci">static error_e create_worker(HANDLE *p_worker_handle, worker_params_t *p_worker_param)</div><div class="ttdoc">Create a worker object: Packs parameters into a struct, and calls CreateThread.</div><div class="ttdef"><b>Definition:</b> <a href="factori_8c_source.html#l00243">factori.c:243</a></div></div>
<div class="ttc" id="astructworker__params__s_html_a2e86a302da7bea84d2f127e64cb4e8bb"><div class="ttname"><a href="structworker__params__s.html#a2e86a302da7bea84d2f127e64cb4e8bb">worker_params_s::p_lock_tasks_file</a></div><div class="ttdeci">lock_t * p_lock_tasks_file</div><div class="ttdef"><b>Definition:</b> <a href="factori_8h_source.html#l00048">factori.h:48</a></div></div>
<div class="ttc" id="afile__utils__ext_8h_html_a3c208f29f0217c1c57eb8ba4e1a151e5"><div class="ttname"><a href="file__utils__ext_8h.html#a3c208f29f0217c1c57eb8ba4e1a151e5">CHAR_SIZE_OF_FIRST_LINE</a></div><div class="ttdeci">#define CHAR_SIZE_OF_FIRST_LINE</div><div class="ttdoc">The length (number of characters) of the prototype string.</div><div class="ttdef"><b>Definition:</b> <a href="file__utils__ext_8h_source.html#l00030">file_utils_ext.h:30</a></div></div>
<div class="ttc" id="alock__ext_8h_html_a5d3201469d7c49626a752c11c7760b10"><div class="ttname"><a href="lock__ext_8h.html#a5d3201469d7c49626a752c11c7760b10">LOCK_write_lock</a></div><div class="ttdeci">error_e LOCK_write_lock(lock_t *const p_lock)</div><div class="ttdoc">Lock a resource for writing. That is, exclusive access, to a specific resource. No other readers or w...</div><div class="ttdef"><b>Definition:</b> <a href="lock_8c_source.html#l00211">lock.c:211</a></div></div>
<div class="ttc" id="astructlock__s_html"><div class="ttname"><a href="structlock__s.html">lock_s</a></div><div class="ttdoc">The struct has three synchornization objects and a counter: two mutexes, and one semaphore....</div><div class="ttdef"><b>Definition:</b> <a href="lock__ext_8h_source.html#l00032">lock_ext.h:33</a></div></div>
<div class="ttc" id="aprime__ext_8h_html_ab1cd6cee23a302a6ac6af9cd7dabb8cb"><div class="ttname"><a href="prime__ext_8h.html#ab1cd6cee23a302a6ac6af9cd7dabb8cb">PRIME_get_primes</a></div><div class="ttdeci">error_e PRIME_get_primes(const DWORD target, DWORD primes[], DWORD *num_of_primes_point)</div><div class="ttdoc">Compute the prime factors of a given POSITIVE number. 0 is not allowed, and 1 has no prime factors.</div><div class="ttdef"><b>Definition:</b> <a href="prime_8c_source.html#l00033">prime.c:33</a></div></div>
<div class="ttc" id="afile__utils__ext_8h_html_adf93eb0cba8a591cfec87d854663d791"><div class="ttname"><a href="file__utils__ext_8h.html#adf93eb0cba8a591cfec87d854663d791">CHAR_SIZE_OF_LINE_FOR_EACH_PRIME</a></div><div class="ttdeci">#define CHAR_SIZE_OF_LINE_FOR_EACH_PRIME</div><div class="ttdoc">The length (number of characters) of the middle factor element string.</div><div class="ttdef"><b>Definition:</b> <a href="file__utils__ext_8h_source.html#l00032">file_utils_ext.h:32</a></div></div>
<div class="ttc" id="astructworker__params__s_html_a6a7695ab492ad6eb66512cc155b184c4"><div class="ttname"><a href="structworker__params__s.html#a6a7695ab492ad6eb66512cc155b184c4">worker_params_s::a_tasks_file_name</a></div><div class="ttdeci">char a_tasks_file_name[MAX_PATH]</div><div class="ttdef"><b>Definition:</b> <a href="factori_8h_source.html#l00045">factori.h:45</a></div></div>
<div class="ttc" id="acommand__line__parsing__ext_8h_html_a48746ebf755019b062fe43d17259c7ef"><div class="ttname"><a href="command__line__parsing__ext_8h.html#a48746ebf755019b062fe43d17259c7ef">parse_command_line_input</a></div><div class="ttdeci">error_e parse_command_line_input(int argc_, char *argv_[], factori_args_t *p_output_args)</div><div class="ttdoc">parsing the command line, validates input integrity and fills the arg structure. CAUTION: This functi...</div><div class="ttdef"><b>Definition:</b> <a href="command__line__parsing_8c_source.html#l00041">command_line_parsing.c:41</a></div></div>
<div class="ttc" id="acommon__types_8h_html_a09c25ad25f326a930ae42ace60b70232a2c94b966c744d2ac7c5954e07ee61c47"><div class="ttname"><a href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a2c94b966c744d2ac7c5954e07ee61c47">ERROR_FAILED_TO_CREATE_THREAD_E</a></div><div class="ttdeci">@ ERROR_FAILED_TO_CREATE_THREAD_E</div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00075">common_types.h:75</a></div></div>
<div class="ttc" id="acommon__types_8h_html_a09c25ad25f326a930ae42ace60b70232a5ffa8953d8668e40c26f99ba884847b8"><div class="ttname"><a href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a5ffa8953d8668e40c26f99ba884847b8">ERROR_FAILED_TO_ALLOCATE_MEMORY_E</a></div><div class="ttdeci">@ ERROR_FAILED_TO_ALLOCATE_MEMORY_E</div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00047">common_types.h:47</a></div></div>
<div class="ttc" id="atrace_8h_html_a88edd2aa4feabff4af21a997d5d8aa23"><div class="ttname"><a href="trace_8h.html#a88edd2aa4feabff4af21a997d5d8aa23">DEBUG_PRINT</a></div><div class="ttdeci">#define DEBUG_PRINT(...)</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00169">trace.h:169</a></div></div>
<div class="ttc" id="astructworker__params__s_html_a33c0a8e7a6412053b789120446f93419"><div class="ttname"><a href="structworker__params__s.html#a33c0a8e7a6412053b789120446f93419">worker_params_s::p_queue</a></div><div class="ttdeci">queue_t * p_queue</div><div class="ttdef"><b>Definition:</b> <a href="factori_8h_source.html#l00046">factori.h:46</a></div></div>
<div class="ttc" id="alock__ext_8h_html_a83e03a05b849ad0ca826de75fe29b2cb"><div class="ttname"><a href="lock__ext_8h.html#a83e03a05b849ad0ca826de75fe29b2cb">LOCK_write_release</a></div><div class="ttdeci">error_e LOCK_write_release(lock_t *const p_lock)</div><div class="ttdoc">Release the write lock.</div><div class="ttdef"><b>Definition:</b> <a href="lock_8c_source.html#l00238">lock.c:238</a></div></div>
<div class="ttc" id="afile__utils__ext_8h_html_ac483ad62d3ca895678cffe3a53744f32"><div class="ttname"><a href="file__utils__ext_8h.html#ac483ad62d3ca895678cffe3a53744f32">FILE_UTILS_read_one_line_from_file</a></div><div class="ttdeci">error_e FILE_UTILS_read_one_line_from_file(HANDLE file_handle, DWORD *p_bytes_read_in_line, DWORD *p_number)</div><div class="ttdoc">Read a single line, that is, all charecters until \r  (including). Outputs the number of charcters th...</div><div class="ttdef"><b>Definition:</b> <a href="file__utils_8c_source.html#l00049">file_utils.c:49</a></div></div>
<div class="ttc" id="acommon__types_8h_html_a09c25ad25f326a930ae42ace60b70232a0b228f1b329d42635ff838109be43b6a"><div class="ttname"><a href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a0b228f1b329d42635ff838109be43b6a">ERROR_INVALID_PARAM_E</a></div><div class="ttdeci">@ ERROR_INVALID_PARAM_E</div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00046">common_types.h:46</a></div></div>
<div class="ttc" id="atrace_8h_html_a7f28dc96228653e7742a5687d23e9239"><div class="ttname"><a href="trace_8h.html#a7f28dc96228653e7742a5687d23e9239">CHECK_AND_BREAK</a></div><div class="ttdeci">#define CHECK_AND_BREAK(_status_)</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00052">trace.h:52</a></div></div>
<div class="ttc" id="acommon__types_8h_html_a09c25ad25f326a930ae42ace60b70232a476a73158bf7252482fc4ce97e1fa3f0"><div class="ttname"><a href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a476a73158bf7252482fc4ce97e1fa3f0">ERROR_STRCPY_FAILED_E</a></div><div class="ttdeci">@ ERROR_STRCPY_FAILED_E</div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00054">common_types.h:54</a></div></div>
<div class="ttc" id="acommon__types_8h_html_a09c25ad25f326a930ae42ace60b70232"><div class="ttname"><a href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232">error_e</a></div><div class="ttdeci">error_e</div><div class="ttdoc">Error enumerators, when shared, allows program call to handle issues.</div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00041">common_types.h:42</a></div></div>
<div class="ttc" id="astructfactori__args__s_html_a0ae7de72f63571717d15a5668b83c8df"><div class="ttname"><a href="structfactori__args__s.html#a0ae7de72f63571717d15a5668b83c8df">factori_args_s::a_task_file_name</a></div><div class="ttdeci">char a_task_file_name[MAX_PATH]</div><div class="ttdef"><b>Definition:</b> <a href="command__line__parsing__ext_8h_source.html#l00037">command_line_parsing_ext.h:37</a></div></div>
<div class="ttc" id="aqueue__ext_8h_html_af1c113374e964f484498f3fa67352e7d"><div class="ttname"><a href="queue__ext_8h.html#af1c113374e964f484498f3fa67352e7d">QUEUE_top</a></div><div class="ttdeci">queue_elem_t QUEUE_top(queue_t *p_queue)</div><div class="ttdoc">Given a queue, return the top element of the queue. On fail: reutrn a &quot;NULL Queue element&quot;,...</div><div class="ttdef"><b>Definition:</b> <a href="queue_8c_source.html#l00066">queue.c:66</a></div></div>
<div class="ttc" id="alock__ext_8h_html_a574e3fa24bc964d06eb31813fe80eae0"><div class="ttname"><a href="lock__ext_8h.html#a574e3fa24bc964d06eb31813fe80eae0">LOCK_destroy_lock</a></div><div class="ttdeci">error_e LOCK_destroy_lock(lock_t **p_lock)</div><div class="ttdoc">Close all handles of the sync objects. Free the allocated memory, and set the pointer to the struct t...</div><div class="ttdef"><b>Definition:</b> <a href="lock_8c_source.html#l00275">lock.c:275</a></div></div>
<div class="ttc" id="aqueue__ext_8h_html_a404707c34930328e4b2bdcd53e600c79"><div class="ttname"><a href="queue__ext_8h.html#a404707c34930328e4b2bdcd53e600c79">QUEUE_destroy_queue</a></div><div class="ttdeci">error_e QUEUE_destroy_queue(queue_t **p_queue)</div><div class="ttdoc">Frees all elements in the queue, then free the queue struct and sets it to NULL.</div><div class="ttdef"><b>Definition:</b> <a href="queue_8c_source.html#l00234">queue.c:234</a></div></div>
<div class="ttc" id="afactori_8c_html_acc1487cb2f24894cf9c48a718c302503"><div class="ttname"><a href="factori_8c.html#acc1487cb2f24894cf9c48a718c302503">worker_thread</a></div><div class="ttdeci">static DWORD WINAPI worker_thread(LPVOID lpParam)</div><div class="ttdoc">As the name suggests, does most of the work load expected from the program. Details are found in the ...</div><div class="ttdef"><b>Definition:</b> <a href="factori_8c_source.html#l00296">factori.c:296</a></div></div>
<div class="ttc" id="afile__utils__ext_8h_html_a9b118d96de984eb21f418e288622ecde"><div class="ttname"><a href="file__utils__ext_8h.html#a9b118d96de984eb21f418e288622ecde">MAX_NUMBER_OF_DIGITS</a></div><div class="ttdeci">#define MAX_NUMBER_OF_DIGITS</div><div class="ttdoc">Upper bound on the number of digits per a certain task.</div><div class="ttdef"><b>Definition:</b> <a href="file__utils__ext_8h_source.html#l00028">file_utils_ext.h:28</a></div></div>
<div class="ttc" id="atrace_8h_html_a8ff10b75745acf0409de91ac1db60a20"><div class="ttname"><a href="trace_8h.html#a8ff10b75745acf0409de91ac1db60a20">DEBUG_LEVEL_FIVE</a></div><div class="ttdeci">#define DEBUG_LEVEL_FIVE</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00089">trace.h:89</a></div></div>
<div class="ttc" id="acommon__types_8h_html_a09c25ad25f326a930ae42ace60b70232aadeb5032c03491611646c1c64f7c0e0c"><div class="ttname"><a href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232aadeb5032c03491611646c1c64f7c0e0c">ERROR_OK</a></div><div class="ttdeci">@ ERROR_OK</div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00044">common_types.h:44</a></div></div>
<div class="ttc" id="astructqueue__elem__s_html_a4132b46b4901a516175050042022a791"><div class="ttname"><a href="structqueue__elem__s.html#a4132b46b4901a516175050042022a791">queue_elem_s::data</a></div><div class="ttdeci">DWORD data</div><div class="ttdef"><b>Definition:</b> <a href="queue__ext_8h_source.html#l00049">queue_ext.h:49</a></div></div>
<div class="ttc" id="alock__ext_8h_html_ad998fe7d10043d8d0119913c1104f131"><div class="ttname"><a href="lock__ext_8h.html#ad998fe7d10043d8d0119913c1104f131">LOCK_read_lock</a></div><div class="ttdeci">error_e LOCK_read_lock(lock_t *const p_lock)</div><div class="ttdoc">Lock a resource (can be what ever resource you want) for readinging. That is, any number of readers c...</div><div class="ttdef"><b>Definition:</b> <a href="lock_8c_source.html#l00109">lock.c:109</a></div></div>
<div class="ttc" id="aqueue__ext_8h_html_a9bc9b6a4ce45ab9e7bd2beb99646a892"><div class="ttname"><a href="queue__ext_8h.html#a9bc9b6a4ce45ab9e7bd2beb99646a892">QUEUE_empty</a></div><div class="ttdeci">BOOL QUEUE_empty(queue_t *p_queue)</div><div class="ttdoc">Returns true if the queue is empty and false otherwise. (Also checks the validity of the queuewhen ac...</div><div class="ttdef"><b>Definition:</b> <a href="queue_8c_source.html#l00206">queue.c:206</a></div></div>
<div class="ttc" id="afile__utils__ext_8h_html_aa7d90eddf0161c6ee6b16f7cf59d6525"><div class="ttname"><a href="file__utils__ext_8h.html#aa7d90eddf0161c6ee6b16f7cf59d6525">FILE_UTILS_set_write_position</a></div><div class="ttdeci">void FILE_UTILS_set_write_position(const DWORD position)</div><div class="ttdoc">Set global file position for writing.</div><div class="ttdef"><b>Definition:</b> <a href="file__utils_8c_source.html#l00031">file_utils.c:31</a></div></div>
<div class="ttc" id="afile__utils__ext_8h_html_aa61cde9f0eda8ca94b81c2b9ea7efcd9"><div class="ttname"><a href="file__utils__ext_8h.html#aa61cde9f0eda8ca94b81c2b9ea7efcd9">create_output_line</a></div><div class="ttdeci">error_e create_output_line(DWORD target, DWORD numbers[], DWORD num_of_primes, char *p_output_buffer, DWORD *p_num_of_bytes_written)</div><div class="ttdoc">The function prints a line into a buffer according to requirments.</div><div class="ttdef"><b>Definition:</b> <a href="file__utils_8c_source.html#l00228">file_utils.c:228</a></div></div>
<div class="ttc" id="astructworker__params__s_html_ac119332d5ac44045e1c7d27e23263947"><div class="ttname"><a href="structworker__params__s.html#ac119332d5ac44045e1c7d27e23263947">worker_params_s::p_lock_queue</a></div><div class="ttdeci">lock_t * p_lock_queue</div><div class="ttdef"><b>Definition:</b> <a href="factori_8h_source.html#l00047">factori.h:47</a></div></div>
<div class="ttc" id="alock__ext_8h_html_a1438450e8ec75fb3feb6ce67a503d779"><div class="ttname"><a href="lock__ext_8h.html#a1438450e8ec75fb3feb6ce67a503d779">LOCK_initialize_lock</a></div><div class="ttdeci">lock_t * LOCK_initialize_lock(void)</div><div class="ttdoc">Initialize a lock struct, All three sync object are created but not assigned to anyone yet....</div><div class="ttdef"><b>Definition:</b> <a href="lock_8c_source.html#l00025">lock.c:25</a></div></div>
<div class="ttc" id="aqueue__ext_8h_html_a1674fd68ced4f60de29e1089924f2614"><div class="ttname"><a href="queue__ext_8h.html#a1674fd68ced4f60de29e1089924f2614">NULL_QUEUE_ELEMENT</a></div><div class="ttdeci">#define NULL_QUEUE_ELEMENT</div><div class="ttdef"><b>Definition:</b> <a href="queue__ext_8h_source.html#l00027">queue_ext.h:27</a></div></div>
<div class="ttc" id="astructqueue__s_html"><div class="ttname"><a href="structqueue__s.html">queue_s</a></div><div class="ttdoc">A queue object. Has pointer to last and first elements in the queue. Also hold a counter on the numbe...</div><div class="ttdef"><b>Definition:</b> <a href="queue__ext_8h_source.html#l00058">queue_ext.h:59</a></div></div>
<div class="ttc" id="atrace_8h_html_a9e1da3f98202e27d74c6309dec5e8dbf"><div class="ttname"><a href="trace_8h.html#a9e1da3f98202e27d74c6309dec5e8dbf">print_error_msg</a></div><div class="ttdeci">#define print_error_msg(...)</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00042">trace.h:42</a></div></div>
<div class="ttc" id="atrace_8h_html_adab028ad33c1ace2ad2bc51c6aad0ac4"><div class="ttname"><a href="trace_8h.html#adab028ad33c1ace2ad2bc51c6aad0ac4">DEBUG_LEVEL_ONE</a></div><div class="ttdeci">#define DEBUG_LEVEL_ONE</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00085">trace.h:85</a></div></div>
<div class="ttc" id="afile__utils__ext_8h_html_ad4637d1602e581b018988f78767d5f5f"><div class="ttname"><a href="file__utils__ext_8h.html#ad4637d1602e581b018988f78767d5f5f">FILE_UTILS_create_file_for_shared_read_and_write</a></div><div class="ttdeci">error_e FILE_UTILS_create_file_for_shared_read_and_write(HANDLE *p_file_handle, char *p_input_file_name)</div><div class="ttdoc">Creates a file handle for shared Read and WRITE.</div><div class="ttdef"><b>Definition:</b> <a href="file__utils_8c_source.html#l00133">file_utils.c:133</a></div></div>
<div class="ttc" id="aqueue__ext_8h_html_a59dd29666d51f1070ecc907c638f2018"><div class="ttname"><a href="queue__ext_8h.html#a59dd29666d51f1070ecc907c638f2018">QUEUE_pop</a></div><div class="ttdeci">error_e QUEUE_pop(queue_t *p_queue)</div><div class="ttdoc">Removed the top queue element from the queue. If called on empty queue does nothing,...</div><div class="ttdef"><b>Definition:</b> <a href="queue_8c_source.html#l00103">queue.c:103</a></div></div>
<div class="ttc" id="alock__ext_8h_html_a387d3cd06fb2999414bd1c60a0214649"><div class="ttname"><a href="lock__ext_8h.html#a387d3cd06fb2999414bd1c60a0214649">LOCK_read_release</a></div><div class="ttdeci">error_e LOCK_read_release(lock_t *const p_lock)</div><div class="ttdoc">Release the readers lock.</div><div class="ttdef"><b>Definition:</b> <a href="lock_8c_source.html#l00165">lock.c:165</a></div></div>
<div class="ttc" id="atrace_8h_html_afc1d6b99a4c100f81e56388c74b63cf1"><div class="ttname"><a href="trace_8h.html#afc1d6b99a4c100f81e56388c74b63cf1">DEBUG_PRINT_FUNCTION_END</a></div><div class="ttdeci">#define DEBUG_PRINT_FUNCTION_END()</div><div class="ttdef"><b>Definition:</b> <a href="trace_8h_source.html#l00172">trace.h:172</a></div></div>
<div class="ttc" id="astructfactori__args__s_html_a639f825edc175c42483bba7c67ff7ff7"><div class="ttname"><a href="structfactori__args__s.html#a639f825edc175c42483bba7c67ff7ff7">factori_args_s::num_of_threads</a></div><div class="ttdeci">DWORD num_of_threads</div><div class="ttdef"><b>Definition:</b> <a href="command__line__parsing__ext_8h_source.html#l00039">command_line_parsing_ext.h:39</a></div></div>
<div class="ttc" id="acommon__types_8h_html_a09c25ad25f326a930ae42ace60b70232a8407b9556d8eb7b5c96f75bf6cc1e022"><div class="ttname"><a href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232a8407b9556d8eb7b5c96f75bf6cc1e022">ERROR_FAILES_TO_INITIALIZE_QUEUE_E</a></div><div class="ttdeci">@ ERROR_FAILES_TO_INITIALIZE_QUEUE_E</div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00072">common_types.h:72</a></div></div>
<div class="ttc" id="astructfactori__args__s_html"><div class="ttname"><a href="structfactori__args__s.html">factori_args_s</a></div><div class="ttdoc">All the command line argmuents after parsing them. task file name - hard copy information from argv[0...</div><div class="ttdef"><b>Definition:</b> <a href="command__line__parsing__ext_8h_source.html#l00035">command_line_parsing_ext.h:36</a></div></div>
<div class="ttc" id="acommon__types_8h_html_a09c25ad25f326a930ae42ace60b70232abe2a47cd38e8d32957f81c49d39784d0"><div class="ttname"><a href="common__types_8h.html#a09c25ad25f326a930ae42ace60b70232abe2a47cd38e8d32957f81c49d39784d0">ERROR_FAILES_TO_INITIALIZE_LOCK_E</a></div><div class="ttdeci">@ ERROR_FAILES_TO_INITIALIZE_LOCK_E</div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00081">common_types.h:81</a></div></div>
<div class="ttc" id="astructfactori__args__s_html_a05369ef03cb7e97fd2a5448fa4993efb"><div class="ttname"><a href="structfactori__args__s.html#a05369ef03cb7e97fd2a5448fa4993efb">factori_args_s::p_priority_file_name</a></div><div class="ttdeci">char * p_priority_file_name</div><div class="ttdef"><b>Definition:</b> <a href="command__line__parsing__ext_8h_source.html#l00038">command_line_parsing_ext.h:38</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_41bbe6cf917fb24e0014a8b763a4c43f.html">Ex3</a></li><li class="navelem"><a class="el" href="dir_f3eab118362eb2556e30c81da235aae4.html">Factori</a></li><li class="navelem"><a class="el" href="dir_e4d01f95d99a2189af7a6dae873b892b.html">src</a></li><li class="navelem"><a class="el" href="factori_8c.html">factori.c</a></li>
    <li class="footer">Generated on Thu Dec 17 2020 10:38:01 for EX3 by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
